#!/bin/bash

#  Find a pattern in a set of files and highlight them:
#+ (needs a recent version of egrep).

OPTIND=1
mycase=""
usage="fstr: find string in files.
Usage: fstr [-i] \"pattern\" [\"filename pattern\"] "
while getopts :it opt
do
    case "$opt" in
       i) mycase="-i " ;;
       *) echo "$usage"; exit ;;
    esac
done
shift $(( $OPTIND - 1 ))
if [ "$#" -lt 1 ]; then
    echo "$usage"
    exit;
fi
find . -type f -name "${2:-*}" -print0 | \
xargs -0 egrep --color=auto -sn ${case} "$1" 2>&- | more
